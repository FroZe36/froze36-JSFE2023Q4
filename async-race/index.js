(()=>{"use strict";var t={507:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(601),r=n.n(a),i=n(314),o=n.n(i)()(r());o.push([t.id,".header {\n  padding: 20px;\n  background-color: inherit;\n  display: flex;\n  gap: 25px;\n  justify-content: center;\n  .header__button {\n    background-color: orange;\n    border-radius: 8px;\n    padding: 12px 15px;\n    font-size: clamp(0.8rem, 1.1vw, 1.5rem);\n    transition: transform 0.3s ease;\n    &:hover {\n      transform: scale(0.95);\n    }\n  }\n}",""]);const s=o},351:(t,e,n)=>{n.d(e,{A:()=>h});var a=n(601),r=n.n(a),i=n(314),o=n.n(i),s=n(417),c=n.n(s),d=new URL(n(183),n.b),u=o()(r()),l=c()(d);u.push([t.id,`.garage {\n  button[disabled] {\n    filter: opacity(0.5);\n    cursor: not-allowed;\n    &:hover {\n      transform: none;\n    }\n  }\n  button {\n    padding: 10px 15px;\n    background-color: black;\n    border-radius: 8px;\n    color: yellow;\n    font-size: clamp(0.7rem, 1vw, 1.3rem);\n    transition: transform 0.3s ease;\n    &:hover {\n      transform: scale(0.95);\n    }\n  }\n  .garage__control-wrapper {\n    margin-bottom: 10px;\n    display: flex;\n  }\n  .garage__control-wrapper:not(:last-of-type) {\n    .control__car-form {\n      display: flex;\n      align-items: center;\n    }\n    .control__input-name {\n      padding: 3px 10px;\n      border-radius: 8px;\n      width: 180px;\n      border-color: black;\n    }\n    .control__input-color {\n      margin-left: 3px;\n      cursor: pointer;\n      border-color: black;\n    }\n    .control__button {\n      margin-left: 15px;\n    }\n  }\n  .garage__control-wrapper:last-of-type {\n    gap: 15px;\n  }\n  .garage__title {\n    margin-bottom: 20px;\n  }\n  .garage__counter {\n    font-size: clamp(1.5rem, 2vw, 2rem);\n    color: rgb(199, 158, 10);\n    margin-bottom: 15px;\n  }\n\n  .race {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    button {\n      padding: 5px 10px;\n    }\n    .track {\n      display: flex;\n      flex-direction: column;\n      gap: 5px;\n      .track-header {\n        display: inline-flex;\n        align-items: center;\n        gap: 10px;\n\n        .car-title {\n          font-size: clamp(1rem, 1.5vw, 1.5rem);\n          color: rgb(24, 219, 125);\n        }\n      }\n      .track-road {\n        display: flex;\n        align-items: flex-end;\n        .track-wrapper-btn {\n          display: inline-flex;\n          gap: 5px;\n          align-self: start;\n        }\n        .car-container {\n          margin-left: 10px;\n          margin-right: 10px;\n          flex-grow: 1;\n          border-bottom: 2px dashed #fff;\n        }\n        .icon {\n          position: relative;\n          top: 4.5px;\n        }\n        .track-finish {\n          position: absolute;\n          right: 100px;\n          width: 40px;\n          height: 40px;\n          background-image: url(${l});\n          background-size: contain;\n          background-repeat: no-repeat;\n        }\n      }\n    }\n  }\n  .pagination-wrapper {\n    display: flex;\n    gap: 25px;\n    margin-top: 25px;\n  }\n}\n`,""]);const h=u},208:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(601),r=n.n(a),i=n(314),o=n.n(i)()(r());o.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap);"]),o.push([t.id,".ubuntu-regular {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 400;\n  font-style: normal;\n}\n.ubuntu-medium {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 500;\n  font-style: normal;\n}\n.ubuntu-bold {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 700;\n  font-style: normal;\n}\n* {\n  margin: 0;\n  padding: 0;\n}\nhtml {\n  position: relative;\n  box-sizing: border-box;\n}\n*,\n*::before,\n*::after {\n  box-sizing: inherit;\n}\nbody {\n  min-width: 320px;\n  min-height: 100vh;\n  font-family: Arial, sans-serif;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n}\nbutton {\n  padding: 0;\n  cursor: pointer;\n  border: none;\n}\na {\n  text-decoration: none;\n  color: inherit;\n}\nul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nfigure,\nfieldset {\n  margin: 0;\n}\n.container {\n  max-width: 1440px;\n  padding: 0px 20px;\n  margin: 0 auto;\n}\n\n.title-page {\n  font-size: clamp(2rem, 2vw, 4rem);\n  color: rgb(199, 158, 10)\n}\n.main {\n  padding: 0px 20px 20px 20px;\n}\n.icon {\n  width: 100px;\n  height: 60px;\n}\n",""]);const s=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(a)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var d=0;d<t.length;d++){var u=[].concat(t[d]);a&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},570:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var a=n(72),r=n.n(a),i=n(825),o=n.n(i),s=n(659),c=n.n(s),d=n(56),u=n.n(d),l=n(540),h=n.n(l),p=n(113),g=n.n(p),m=n(507),f={};f.styleTagTransform=g(),f.setAttributes=u(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),r()(m.A,f);const v=m.A&&m.A.locals?m.A.locals:void 0},448:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var a=n(72),r=n.n(a),i=n(825),o=n.n(i),s=n(659),c=n.n(s),d=n(56),u=n.n(d),l=n(540),h=n.n(l),p=n(113),g=n.n(p),m=n(351),f={};f.styleTagTransform=g(),f.setAttributes=u(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),r()(m.A,f);const v=m.A&&m.A.locals?m.A.locals:void 0},511:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var a=n(72),r=n.n(a),i=n(825),o=n.n(i),s=n(659),c=n.n(s),d=n(56),u=n.n(d),l=n(540),h=n.n(l),p=n(113),g=n.n(p),m=n(208),f={};f.styleTagTransform=g(),f.setAttributes=u(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),r()(m.A,f);const v=m.A&&m.A.locals?m.A.locals:void 0},72:t=>{var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var i={},o=[],s=0;s<t.length;s++){var c=t[s],d=a.base?c[0]+a.base:c[0],u=i[d]||0,l="".concat(d," ").concat(u);i[d]=u+1;var h=n(l),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=r(p,a);a.byIndex=s,e.splice(s,0,{identifier:l,updater:g,references:1})}o.push(l)}return o}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=a(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<i.length;o++){var s=n(i[o]);e[s].references--}for(var c=a(t,r),d=0;d<i.length;d++){var u=n(i[d]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=c}}},659:t=>{var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},300:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.driveCar=e.stopEngine=e.startEngine=e.updateCar=e.deleteCar=e.createCar=e.getCar=e.getCars=e.config=void 0;const r=n(392);e.config={baseUrl:"http://127.0.0.1:3000",garagePath:"/garage",engine:"/engine",winners:"/winners",startEngine:"started",stopEngine:"stopped",driveStatus:"drive",carsLimit:r.constants.CARS_PER_PAGE_LIMIT,winnersLimit:r.constants.WINNERS_PER_PAGE_LIMIT},e.getCars=t=>a(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.garagePath}?_page=${t}&_limit=${e.config.carsLimit}`);return{data:yield n.json(),count:Number(n.headers.get("X-Total-Count"))}})),e.getCar=t=>a(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`);return yield n.json()})),e.createCar=t=>a(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.garagePath}`,{method:"POST",headers:{"Content-Type":"application/json"},body:t})})),e.deleteCar=t=>a(void 0,void 0,void 0,(function*(){yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`,{method:"DELETE"})})),e.updateCar=(t,n)=>a(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:n})})),e.startEngine=t=>a(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.startEngine}`,{method:"PATCH"});return yield n.json()})),e.stopEngine=t=>a(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.stopEngine}`,{method:"PATCH"})})),e.driveCar=t=>a(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.driveStatus}`,{method:"PATCH"})}))},393:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;const a=n(804);class r extends a.View{constructor({parentElement:t,content:e,classes:n=[]}){super({tagName:"button",classes:n,content:e,parentElement:t}),this.button=this.node}}e.Button=r},962:function(t,e){var n=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.triggerEvent=e.subscribeEvent=void 0;const a={};e.subscribeEvent=(t,e)=>{a[t]||(a[t]=[]),a[t].map((t=>t.name)).includes(e.name)?a[t]=a[t].map((t=>t.name!==e.name?t:e)):a[t].push(e)},e.triggerEvent=t=>n(void 0,void 0,void 0,(function*(){const e=[];a[t]&&a[t].forEach((t=>{e.push(t())})),yield Promise.all(e)}))},514:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderView=void 0;const a=n(393),r=n(804);n(570);class i extends r.View{constructor(t){super({tagName:"header",classes:["header"]}),this.setViewCallback=t,this.render()}render(){const t=new a.Button({parentElement:this.node,content:"To Garage Page",classes:["header__button","ubuntu-regular"]});t.node.onclick=()=>{this.setViewMain(0)};const e=new a.Button({parentElement:this.node,content:"To Winners Page",classes:["header__button","ubuntu-regular"]});e.node.onclick=()=>{this.setViewMain(1)},this.node.append(t.node,e.node)}setViewMain(t){this.setViewCallback(t)}}e.HeaderView=i},817:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Input=void 0,e.Input=class{constructor({parentElement:t,tagName:e="input",type:n="text",classes:a=[],content:r=""}){const i=document.createElement(e);i.type=n,i.classList.add(...a),i.innerHTML=r,this.parentNode=t,this.node=i}}},392:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSvg=e.constants=e.carModels=e.carBrands=e.backgroundsImages=void 0,e.backgroundsImages=["garage.jpg","winner.jpg"],e.carBrands=["Renault","BMW","Audi","Ford","Tesla","Nissan","Kia","Volkswagen","Peugeot","Toyota"],e.carModels=["Kadjar","7er","Q7","Explorer","CyberTruck","350Z","Sportage","Pride","Scirocco R","807","Mark 2"],e.constants={CARS_PER_PAGE_LIMIT:7,WINNERS_PER_PAGE_LIMIT:10,DEFAULT_ACTIVE_CAR_ID:0,DEFAULT_WINNER_CAR_ID:0},e.createSvg=function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("href","./assets/carSprite.svg#Car"),n.setAttribute("y","10"),e.classList.add("icon"),e.append(n),e.style.fill=t,e}},804:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0,e.View=class{constructor({tagName:t="div",classes:e=[],content:n="",parentElement:a}){const r=document.createElement(t);r.classList.add(...e),r.textContent=n,a&&(this.parentNode=a),this.node=r}}},76:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const a=n(514),r=n(804),i=n(876),o=n(555),s=n(828),c=n(610),d=n(392);e.App=class{constructor(){this.header=new a.HeaderView(this.setViewMain.bind(this)),this.main=new r.View({tagName:"main",classes:["main"]}),this.garagePage=new i.GarageView(this.main.node),this.winnerPage=new s.WinnerView(this.main.node),o.pages.push(this.garagePage,this.winnerPage),this.setViewMain(0)}render(){document.body.append(this.header.node),document.body.append(this.main.node)}setViewMain(t){this.main.node&&(this.main.node.innerHTML=""),c.state.activePage=t,this.currentPage=o.pages[t].node,this.main.node.append(this.currentPage),this.changeBackground()}changeBackground(){document.body.style.backgroundImage=`url(./assets/${d.backgroundsImages[c.state.activePage]})`}}},876:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GarageView=void 0;const i=n(804),o=n(191),s=n(884),c=n(821);n(448);const d=r(n(175)),u=n(300),l=n(392),h=n(962),p=n(393);class g extends i.View{constructor(t){super({tagName:"section",classes:["garage"],parentElement:t}),this.carsCount=0,this.currentPage=1,this.maxPages=1,this.createControlCar=new s.CreateCarControlView(this.node),this.updateControlCar=new c.UpdateCarControlView(this.node),this.raceControl=new o.RaceControlView(this.node),this.titlePage=new i.View({parentElement:this.node,tagName:"h1",classes:["garage__title","title-page","ubuntu-bold"],content:`Garage Cars (${this.carsCount})`}),this.counterOnPage=new i.View({parentElement:this.node,tagName:"h3",classes:["garage__counter","ubuntu-bold"],content:`Page â„– (${this.currentPage} / ${this.maxPages})`}),this.containerPagination=new i.View({parentElement:this.node,classes:["pagination-wrapper"]}),(0,h.subscribeEvent)("cars/update",this.updateGarage.bind(this)),(0,h.subscribeEvent)("car/random",this.generateRandomCars.bind(this)),this.render()}render(){return a(this,void 0,void 0,(function*(){this.node.append(this.createControlCar.node,this.updateControlCar.node,this.raceControl.node,this.titlePage.node,this.counterOnPage.node),yield this.updateGarage(),this.createControlPagination()}))}getCars(){return a(this,void 0,void 0,(function*(){const t=yield(0,u.getCars)(this.currentPage);this.carsCount=t.count,this.currentCars=t.data,this.maxPages=this.calcMaxPage()}))}updateGarage(){return a(this,void 0,void 0,(function*(){yield this.getCars(),this.updatePageTitle(),this.updatePageNumber(),this.containerPagination.node.remove(),this.renderRace(this.currentCars||[]),this.node.append(this.containerPagination.node),this.checkStatePaginationControls()}))}updatePageTitle(){this.titlePage.node.textContent=`Garage Cars (${this.carsCount})`}updatePageNumber(){this.counterOnPage.node.textContent=`Page #(${this.currentPage} / ${this.maxPages})`}renderRace(t){void 0!==this.race&&this.node.removeChild(this.race.node),this.race=new d.default(this.node,t),this.node.append(this.race.node)}calcMaxPage(){return Math.ceil(this.carsCount/l.constants.CARS_PER_PAGE_LIMIT)}generateRandomCars(){return a(this,void 0,void 0,(function*(){const t=[];for(let e=0;e<100;e+=1){const e={name:`${l.carBrands[Math.floor(10*Math.random())]} ${l.carModels[Math.floor(10*Math.random())]}`,color:this.generateRandomColor()};t.push((0,u.createCar)(JSON.stringify(e)))}yield Promise.all(t)}))}generateRandomColor(){return`#${Math.floor(16777215*Math.random()).toString(16)}`}createControlPagination(){this.prevButton=new p.Button({parentElement:this.node,classes:[],content:"Previous"}),this.prevButton.node.onclick=()=>{this.currentPage-=1,this.changePage()},this.nextButton=new p.Button({parentElement:this.node,classes:[],content:"Next"}),this.nextButton.node.onclick=()=>{this.currentPage+=1,this.changePage()},this.containerPagination.node.append(this.prevButton.button,this.nextButton.button),this.checkStatePaginationControls(),this.node.append(this.containerPagination.node)}checkStatePaginationControls(){this.checkPaginationPrevState(),this.checkPaginationNextState()}checkPaginationPrevState(){var t;const e=null===(t=this.prevButton)||void 0===t?void 0:t.button;e&&(this.currentPage>1?e.disabled=!1:e.disabled=!0)}checkPaginationNextState(){var t;const e=null===(t=this.nextButton)||void 0===t?void 0:t.button;e&&(this.currentPage<this.maxPages?e.disabled=!1:e.disabled=!0)}changePage(){this.updateGarage(),this.checkStatePaginationControls()}}e.GarageView=g},884:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CreateCarControlView=void 0;const r=n(300),i=n(393),o=n(962),s=n(817),c=n(804);class d extends c.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.nameInput=new s.Input({parentElement:this.node,classes:["control__input-name","ubuntu-medium"]}),this.nameInput.node.required=!0,this.colorPicker=new s.Input({parentElement:this.node,classes:["control__input-color"],type:"color"}),this.buttonSubmit=new i.Button({parentElement:this.node,content:"Create Car",classes:["control__button","ubuntu-medium"]}),this.buttonSubmit.button.type="submit",this.render()}render(){const t=new c.View({parentElement:this.node,tagName:"form",classes:["control__car-form"]});t.node.onsubmit=t=>t.preventDefault(),this.buttonSubmit.button.onclick=()=>a(this,void 0,void 0,(function*(){this.nameInput.node.checkValidity()&&(yield this.addCar(this.nameInput.node.value,this.colorPicker.node.value),(0,o.triggerEvent)("cars/update"),this.clearControls())})),t.node.append(this.nameInput.node,this.colorPicker.node,this.buttonSubmit.node),this.node.append(t.node)}addCar(t,e){return a(this,void 0,void 0,(function*(){const n={name:t,color:e};yield(0,r.createCar)(JSON.stringify(n))}))}clearControls(){this.nameInput.node.value="",this.colorPicker.node.value="#000000"}}e.CreateCarControlView=d},175:function(t,e,n){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(962),i=n(392),o=n(804),s=n(610),c=a(n(411));class d extends o.View{constructor(t,e){super({parentElement:t,classes:["race"]}),this.tracks=[],this.cars=e,(0,r.subscribeEvent)("cars/raceStart",this.startRace.bind(this)),(0,r.subscribeEvent)("cars/raceReset",this.resetRace.bind(this)),this.renderTracks()}renderTracks(){const t=document.createDocumentFragment();this.cars.forEach((e=>{const n=new c.default(this.node,e);this.tracks.push(n),t.append(n.node)})),this.node.append(t)}startRace(){s.state.winnerCarId=i.constants.DEFAULT_WINNER_CAR_ID,this.updateTrackAccess(!0);const t=[],e=[];this.tracks.forEach((e=>{t.push(e.startEngine())})),Promise.all(t).then((t=>{t.forEach(((t,n)=>{e.push(this.tracks[n].raceAllCars(t)),this.tracks[n].isCarDriving=!0,this.tracks[n].checkCarStatus()}))})),this.updateRaceState(!0)}resetRace(){const t=[];this.tracks.forEach((e=>{t.push(e.resetCar())})),Promise.all(t).then((()=>{this.updateRaceState(!1),this.updateTrackAccess(!1)}))}updateRaceState(t){s.state.isRaceStarted=t,(0,r.triggerEvent)("race/started")}updateTrackAccess(t){this.tracks.forEach((e=>{e.updateTrackAccess(t)}))}}e.default=d},191:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RaceControlView=void 0;const r=n(393),i=n(962),o=n(804),s=n(610);class c extends o.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.randomCarsButton=new r.Button({parentElement:this.node,content:"Random Cars",classes:["control__button","ubuntu-medium"]}),this.startRaceButton=new r.Button({parentElement:this.node,content:"Start Race",classes:["control__button","ubuntu-medium"]}),this.resetButton=new r.Button({parentElement:this.node,content:"Reset",classes:["control__button","ubuntu-medium"]}),this.resetButton.button.disabled=!0,(0,i.subscribeEvent)("race/started",this.checkRaceResetState.bind(this)),this.render()}render(){this.randomCarsButton.node.onclick=()=>{this.generateRandomCars()},this.startRaceButton.node.onclick=()=>{this.startRace()},this.resetButton.node.onclick=()=>{this.resetRace()},this.node.append(this.randomCarsButton.node,this.startRaceButton.node,this.resetButton.node)}generateRandomCars(){return a(this,void 0,void 0,(function*(){this.randomCarsButton.button.disabled=!0,yield(0,i.triggerEvent)("car/random"),yield(0,i.triggerEvent)("cars/update"),this.randomCarsButton.button.disabled=!1}))}startRace(){this.startRaceButton.button.disabled=!0,this.resetButton.button.disabled=!0,this.randomCarsButton.button.disabled=!0,(0,i.triggerEvent)("cars/raceStart")}resetRace(){this.resetButton.button.disabled=!0,(0,i.triggerEvent)("cars/raceReset")}checkRaceResetState(){s.state.isRaceStarted?(this.resetButton.button.disabled=!1,this.startRaceButton.button.disabled=!0,this.randomCarsButton.button.disabled=!0):(this.startRaceButton.button.disabled=!1,this.randomCarsButton.button.disabled=!1,this.resetButton.button.disabled=!0)}}e.RaceControlView=c},411:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const r=n(300),i=n(393),o=n(962),s=n(392),c=n(804),d=n(610);class u extends c.View{constructor(t,e){super({parentElement:t,classes:["track"]}),this.selectBtn=new i.Button({parentElement:this.node,content:"Select",classes:["ubuntu-regular"]}),this.removeBtn=new i.Button({parentElement:this.node,content:"Remove",classes:["ubuntu-regular"]}),this.stopBtn=new i.Button({parentElement:this.node,content:"B",classes:["ubuntu-regular"]}),this.startBtn=new i.Button({parentElement:this.node,content:"A",classes:["ubuntu-regular"]}),this.isCarDriving=!1,this.trackAnimationFrameId=0,this.car=e,this.carContainer=new c.View({classes:["car-container"]}),this.createTrack()}createTrackHeader(){const t=new c.View({classes:["track-header"]});this.selectBtn.node.onclick=()=>this.selectTrack(),this.removeBtn.node.onclick=()=>a(this,void 0,void 0,(function*(){yield this.deleteTrack()}));const e=new c.View({tagName:"h4",classes:["car-title","ubuntu-bold"],content:this.car.name});return t.node.append(this.selectBtn.node,this.removeBtn.node,e.node),t}createTrack(){const t=this.createTrackHeader(),e=new c.View({classes:["track-road"]}),n=this.createCarControls(),a=(0,s.createSvg)(this.car.color);this.carContainer.node.append(a),this.carItem=this.carContainer.node.querySelector(".icon");const r=new c.View({classes:["track-finish"]});e.node.append(n.node,this.carContainer.node,r.node),this.node.append(t.node,e.node),this.checkCarStatus()}createCarControls(){const t=new c.View({classes:["track-wrapper-btn"]});return this.startBtn.node.onclick=()=>a(this,void 0,void 0,(function*(){this.startBtn.button.disabled=!0;const t=yield this.startEngine();this.raceSingleCar(t),this.isCarDriving=!0,this.checkCarStatus()})),this.stopBtn.node.onclick=()=>a(this,void 0,void 0,(function*(){this.stopBtn.button.disabled=!0,yield this.stopEngine(),this.isCarDriving=!1,this.checkCarStatus()})),t.node.append(this.startBtn.node,this.stopBtn.node),t}selectTrack(){d.state.activeCarId=this.car.id,(0,o.triggerEvent)("car/select")}deleteTrack(){return a(this,void 0,void 0,(function*(){this.removeBtn.button.disabled=!0,yield(0,r.deleteCar)(this.car.id),(0,o.triggerEvent)("cars/update"),(0,o.triggerEvent)("car/remove")}))}startEngine(){return a(this,void 0,void 0,(function*(){return yield this.getEngine()}))}raceSingleCar(t){return a(this,void 0,void 0,(function*(){this.startCarAnimation(t),this.updateTrackAccess(!0),(yield this.startDriving()).ok||cancelAnimationFrame(this.trackAnimationFrameId)}))}getEngine(){return a(this,void 0,void 0,(function*(){return yield(0,r.startEngine)(this.car.id)}))}startDriving(){return a(this,void 0,void 0,(function*(){return yield(0,r.driveCar)(this.car.id)}))}resetCar(){return a(this,void 0,void 0,(function*(){yield this.stopEngine()}))}stopEngine(){return a(this,void 0,void 0,(function*(){const t=yield(0,r.stopEngine)(this.car.id);yield t.json(),this.carItem&&(cancelAnimationFrame(this.trackAnimationFrameId),this.carItem.style.left="0px",this.isCarDriving=!1,this.updateTrackAccess(!1))}))}startCarAnimation(t){const e=this.carItem,n=Math.trunc(t.distance/t.velocity),a=(this.carContainer.node.clientWidth-e.clientWidth)/(n/1e3),r=(new Date).getTime();return this.trackAnimationFrameId=requestAnimationFrame((()=>{this.animateCarMovement(e,a,r,n)})),n}raceAllCars(t){return a(this,void 0,void 0,(function*(){this.startCarAnimation(t);const e=yield this.startDriving();return e.ok||cancelAnimationFrame(this.trackAnimationFrameId),e}))}animateCarMovement(t,e,n,a){const r=t,i=(new Date).getTime()-n,o=e*i/1e3;r.style.left=`${o}px`,i<a&&(this.trackAnimationFrameId=requestAnimationFrame((()=>{this.animateCarMovement(r,e,n,a)})))}checkCarStatus(){this.isCarDriving?(this.stopBtn.button.disabled=!1,this.startBtn.button.disabled=!0):(this.stopBtn.button.disabled=!0,this.startBtn.button.disabled=!1)}updateTrackAccess(t){t?(this.selectBtn.button.disabled=!0,this.removeBtn.button.disabled=!0,this.startBtn.button.disabled=!0,this.stopBtn.button.disabled=!0):(this.checkCarStatus(),this.selectBtn.button.disabled=!1,this.removeBtn.button.disabled=!1)}}e.default=u},821:function(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateCarControlView=void 0;const r=n(300),i=n(393),o=n(962),s=n(817),c=n(392),d=n(804),u=n(610);class l extends d.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.nameInput=new s.Input({parentElement:this.node,classes:["control__input-name","ubuntu-medium"]}),this.nameInput.node.required=!0,this.colorPicker=new s.Input({parentElement:this.node,classes:["control__input-color"],type:"color"}),this.buttonSubmit=new i.Button({parentElement:this.node,content:"Update Car",classes:["control__button","ubuntu-medium"]}),this.buttonSubmit.button.type="submit",(0,o.subscribeEvent)("car/select",this.fillCarData.bind(this)),(0,o.subscribeEvent)("car/remove",this.resetControlsState.bind(this)),this.render()}render(){const t=new d.View({parentElement:this.node,tagName:"form",classes:["control__car-form"]});t.node.onsubmit=t=>t.preventDefault(),this.checkButton(),this.buttonSubmit.button.onclick=()=>a(this,void 0,void 0,(function*(){this.nameInput.node.checkValidity()&&(yield this.updateCar())})),t.node.append(this.nameInput.node,this.colorPicker.node,this.buttonSubmit.node),this.node.append(t.node)}updateCar(){return a(this,void 0,void 0,(function*(){const t={name:this.nameInput.node.value,color:this.colorPicker.node.value};yield(0,r.updateCar)(u.state.activeCarId,JSON.stringify(t)),yield(0,o.triggerEvent)("cars/update"),this.resetControlsState()}))}clearControls(){this.nameInput.node.value="",this.colorPicker.node.value="#000000"}fillCarData(){return a(this,void 0,void 0,(function*(){const t=yield(0,r.getCar)(u.state.activeCarId);this.nameInput.node.value=t.name,this.colorPicker.node.value=t.color,this.checkButton()}))}clearActiveCar(){u.state.activeCarId=c.constants.DEFAULT_ACTIVE_CAR_ID}checkButton(){0!==u.state.activeCarId?this.buttonSubmit.button.disabled=!1:this.buttonSubmit.button.disabled=!0}resetControlsState(){this.clearActiveCar(),this.clearControls(),this.checkButton()}}e.UpdateCarControlView=l},555:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pages=void 0,e.pages=[]},610:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.state=void 0;const a=n(392);e.state={activePage:0,activeCarId:a.constants.DEFAULT_ACTIVE_CAR_ID,winnerCarId:a.constants.DEFAULT_WINNER_CAR_ID,isRaceStarted:!1}},828:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WinnerView=void 0;const a=n(804);class r extends a.View{constructor(t){super({tagName:"section",classes:["winner"],content:"Winner Page",parentElement:t})}}e.WinnerView=r},183:(t,e,n)=>{t.exports=n.p+"assets/finish-47c94eb261ff8d25809c.svg"}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={id:a,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=a[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{const t=n(76);n(511),(new t.App).render()})()})();