(()=>{"use strict";var t={507:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(601),a=n.n(i),o=n(314),r=n.n(o)()(a());r.push([t.id,".header {\n  padding: 20px;\n  background-color: inherit;\n  display: flex;\n  gap: 25px;\n  justify-content: center;\n  .header__button {\n    background-color: orange;\n    border-radius: 8px;\n    padding: 12px 15px;\n    font-size: clamp(0.8rem, 1.1vw, 1.5rem);\n    transition: transform 0.3s ease;\n    &:hover {\n      transform: scale(0.95);\n    }\n  }\n}\n",""]);const s=r},383:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(601),a=n.n(i),o=n(314),r=n.n(o)()(a());r.push([t.id,".modal {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 2;\n  padding: 30px;\n  .modal__wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    gap: 10px;\n    background-color: rgba(243, 242, 242, 0.4);\n    padding: 30px;\n    border-radius: 8px;\n  }\n  .modal__text {\n    color: chartreuse;\n    text-align: center;\n    font-size: 50px;\n  }\n  .modal__button-close {\n    background-color: orange;\n    border-radius: 8px;\n    padding: 5px 15px;\n    font-size: 20px;\n  }\n}\n",""]);const s=r},351:(t,e,n)=>{n.d(e,{A:()=>h});var i=n(601),a=n.n(i),o=n(314),r=n.n(o),s=n(417),c=n.n(s),d=new URL(n(183),n.b),l=r()(a()),u=c()(d);l.push([t.id,`.garage {\n  button[disabled] {\n    filter: opacity(0.5);\n    cursor: not-allowed;\n    &:hover {\n      transform: none;\n    }\n  }\n  button {\n    padding: 10px 15px;\n    background-color: black;\n    border-radius: 8px;\n    color: yellow;\n    font-size: clamp(0.7rem, 1vw, 1.3rem);\n    transition: transform 0.3s ease;\n    &:hover {\n      transform: scale(0.95);\n    }\n  }\n  .garage__control-wrapper {\n    margin-bottom: 10px;\n    display: flex;\n  }\n  .garage__control-wrapper:not(:last-of-type) {\n    .control__car-form {\n      display: flex;\n      align-items: center;\n    }\n    .control__input-name {\n      padding: 3px 10px;\n      border-radius: 8px;\n      width: 180px;\n      border-color: black;\n    }\n    .control__input-color {\n      margin-left: 3px;\n      cursor: pointer;\n      border-color: black;\n    }\n    .control__button {\n      margin-left: 15px;\n    }\n  }\n  .garage__control-wrapper:last-of-type {\n    gap: 15px;\n  }\n  .garage__title {\n    margin-bottom: 20px;\n  }\n  .garage__counter {\n    font-size: clamp(1.5rem, 2vw, 2rem);\n    color: rgb(199, 158, 10);\n    margin-bottom: 15px;\n  }\n\n  .race {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    button {\n      padding: 5px 10px;\n    }\n    .track {\n      display: flex;\n      flex-direction: column;\n      gap: 5px;\n      .track-header {\n        display: inline-flex;\n        align-items: center;\n        gap: 10px;\n\n        .car-title {\n          font-size: clamp(1rem, 1.5vw, 1.5rem);\n          color: rgb(24, 219, 125);\n        }\n      }\n      .track-road {\n        display: flex;\n        align-items: flex-end;\n        .track-wrapper-btn {\n          display: inline-flex;\n          gap: 5px;\n          align-self: start;\n        }\n        .car-container {\n          margin-left: 10px;\n          margin-right: 10px;\n          flex-grow: 1;\n          border-bottom: 2px dashed #fff;\n        }\n        .icon {\n          position: relative;\n          top: 4.5px;\n        }\n        .track-finish {\n          position: absolute;\n          right: 100px;\n          width: 40px;\n          height: 40px;\n          background-image: url(${u});\n          background-size: contain;\n          background-repeat: no-repeat;\n        }\n      }\n    }\n  }\n  .pagination-wrapper {\n    display: flex;\n    gap: 25px;\n    margin-top: 25px;\n  }\n}\n`,""]);const h=l},3:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(601),a=n.n(i),o=n(314),r=n.n(o)()(a());r.push([t.id,".winner {\n  .winner__table {\n    border-collapse: collapse;\n    margin-bottom: 30px;\n    min-width: 495px;\n    td {\n      padding: 8px 15px 6px;\n      border: 1px solid #000;\n      background-color: rgba(243, 242, 242, 0.4);\n    }\n    &.asc .table__header th.active {\n      &::after {\n        display: block;\n      }\n    }\n    &.desc .table__header th.active {\n      &::after {\n        display: block;\n        transform: translateY(-20%) scale(0.6, 1);\n      }\n    }\n  }\n  .table__header {\n    background-color: rgb(243, 242, 242);\n    th {\n      padding: 4px 10px;\n    }\n    th.sortable {\n      cursor: pointer;\n      padding-right: 30px;\n    }\n    th.active {\n      position: relative;\n      &::after {\n        display: none;\n        content: '';\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        width: 0px;\n        height: 0px;\n        border: 8px solid transparent;\n        transform: translateY(-70%) scale(0.6, -1);\n        border-top-color: #000;\n      }\n    }\n  }\n  .winner__title {\n    margin-bottom: 20px;\n  }\n  .winner__counter {\n    font-size: clamp(1.5rem, 2vw, 2rem);\n    color: rgb(199, 158, 10);\n    margin-bottom: 15px;\n  }\n  .pagination-wrapper {\n    display: flex;\n    gap: 25px;\n    button[disabled] {\n      filter: opacity(0.7);\n      cursor: not-allowed;\n      &:hover {\n        transform: none;\n      }\n    }\n    button {\n      padding: 10px 15px;\n      background-color: black;\n      border-radius: 8px;\n      color: yellow;\n      font-size: clamp(0.7rem, 1vw, 1.3rem);\n      transition: transform 0.3s ease;\n      &:hover {\n        transform: scale(0.95);\n      }\n    }\n  }\n}\n",""]);const s=r},208:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(601),a=n.n(i),o=n(314),r=n.n(o)()(a());r.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap);"]),r.push([t.id,".ubuntu-regular {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 400;\n  font-style: normal;\n}\n.ubuntu-medium {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 500;\n  font-style: normal;\n}\n.ubuntu-bold {\n  font-family: 'Ubuntu', sans-serif;\n  font-weight: 700;\n  font-style: normal;\n}\n* {\n  margin: 0;\n  padding: 0;\n}\nhtml {\n  position: relative;\n  box-sizing: border-box;\n}\n*,\n*::before,\n*::after {\n  box-sizing: inherit;\n}\nbody {\n  min-width: 320px;\n  min-height: 100vh;\n  font-family: Arial, sans-serif;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n}\nbutton {\n  padding: 0;\n  cursor: pointer;\n  border: none;\n}\na {\n  text-decoration: none;\n  color: inherit;\n}\nul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nfigure,\nfieldset {\n  margin: 0;\n}\n.container {\n  max-width: 1440px;\n  padding: 0px 20px;\n  margin: 0 auto;\n}\n\n.title-page {\n  font-size: clamp(2rem, 2vw, 4rem);\n  color: rgb(199, 158, 10);\n}\n.main {\n  padding: 0px 20px 20px 20px;\n}\n.icon {\n  width: 100px;\n  height: 60px;\n}\n",""]);const s=r},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,a,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(r[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);i&&r[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),e.push(l))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},570:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(72),a=n.n(i),o=n(825),r=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),h=n.n(u),p=n(113),g=n.n(p),m=n(507),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),a()(m.A,f);const b=m.A&&m.A.locals?m.A.locals:void 0},702:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(72),a=n.n(i),o=n(825),r=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),h=n.n(u),p=n(113),g=n.n(p),m=n(383),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),a()(m.A,f);const b=m.A&&m.A.locals?m.A.locals:void 0},448:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(72),a=n.n(i),o=n(825),r=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),h=n.n(u),p=n(113),g=n.n(p),m=n(351),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),a()(m.A,f);const b=m.A&&m.A.locals?m.A.locals:void 0},936:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(72),a=n.n(i),o=n(825),r=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),h=n.n(u),p=n(113),g=n.n(p),m=n(3),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),a()(m.A,f);const b=m.A&&m.A.locals?m.A.locals:void 0},511:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(72),a=n.n(i),o=n(825),r=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),h=n.n(u),p=n(113),g=n.n(p),m=n(208),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),a()(m.A,f);const b=m.A&&m.A.locals?m.A.locals:void 0},72:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},r=[],s=0;s<t.length;s++){var c=t[s],d=i.base?c[0]+i.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=a(p,i);i.byIndex=s,e.splice(s,0,{identifier:u,updater:g,references:1})}r.push(u)}return r}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var o=i(t=t||[],a=a||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var s=n(o[r]);e[s].references--}for(var c=i(t,a),d=0;d<o.length;d++){var l=n(o[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,a&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},300:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.deleteWinner=e.updateWinner=e.createWinner=e.getWinner=e.getAllWinners=e.getWinners=e.driveCar=e.stopEngine=e.startEngine=e.updateCar=e.deleteCar=e.createCar=e.getCar=e.getCars=e.config=void 0;const a=n(392);e.config={baseUrl:"http://127.0.0.1:3000",garagePath:"/garage",engine:"/engine",winners:"/winners",startEngine:"started",stopEngine:"stopped",driveStatus:"drive",carsLimit:a.constants.CARS_PER_PAGE_LIMIT,winnersLimit:a.constants.WINNERS_PER_PAGE_LIMIT,winnersIdSortQuery:"id",winnersWinsSortQuery:"wins",winnersTimeSortQuery:"time",winnersAscSortOrder:"ASC",winnersDescSortOrder:"DESC"},e.getCars=t=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.garagePath}?_page=${t}&_limit=${e.config.carsLimit}`);return{data:yield n.json(),count:Number(n.headers.get("X-Total-Count"))}})),e.getCar=t=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`);return yield n.json()})),e.createCar=t=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.garagePath}`,{method:"POST",headers:{"Content-Type":"application/json"},body:t})})),e.deleteCar=t=>i(void 0,void 0,void 0,(function*(){yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`,{method:"DELETE"})})),e.updateCar=(t,n)=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.garagePath}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:n})})),e.startEngine=t=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.startEngine}`,{method:"PATCH"});return yield n.json()})),e.stopEngine=t=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.stopEngine}`,{method:"PATCH"})})),e.driveCar=t=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.engine}?id=${t}&status=${e.config.driveStatus}`,{method:"PATCH"})})),e.getWinners=(t,...n)=>i(void 0,[t,...n],void 0,(function*(t,n=e.config.winnersIdSortQuery,i=e.config.winnersAscSortOrder){const a=yield fetch(`${e.config.baseUrl}${e.config.winners}?_page=${t}&_limit=${e.config.winnersLimit}&_sort=${n}&_order=${i}`);return{data:yield a.json(),count:Number(a.headers.get("X-Total-Count"))}})),e.getAllWinners=()=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${e.config.baseUrl}${e.config.winners}`);return yield t.json()})),e.getWinner=t=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.config.baseUrl}${e.config.winners}/${t}`);return yield n.json()})),e.createWinner=t=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.winners}`,{method:"POST",headers:{"Content-Type":"application/json"},body:t})})),e.updateWinner=(t,n)=>i(void 0,void 0,void 0,(function*(){return yield fetch(`${e.config.baseUrl}${e.config.winners}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:n})})),e.deleteWinner=t=>i(void 0,void 0,void 0,(function*(){return fetch(`${e.config.baseUrl}${e.config.winners}/${t}`,{method:"DELETE"})}))},393:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;const i=n(804);class a extends i.View{constructor({parentElement:t,content:e,classes:n=[]}){super({tagName:"button",classes:n,content:e,parentElement:t}),this.button=this.node}}e.Button=a},962:function(t,e){var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.triggerEvent=e.subscribeEvent=void 0;const i={};e.subscribeEvent=(t,e)=>{i[t]||(i[t]=[]),i[t].map((t=>t.name)).includes(e.name)?i[t]=i[t].map((t=>t.name!==e.name?t:e)):i[t].push(e)},e.triggerEvent=t=>n(void 0,void 0,void 0,(function*(){const e=[];i[t]&&i[t].forEach((t=>{e.push(t())})),yield Promise.all(e)}))},514:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderView=void 0;const i=n(393),a=n(804);n(570);class o extends a.View{constructor(t){super({tagName:"header",classes:["header"]}),this.setViewCallback=t,this.render()}render(){const t=new i.Button({parentElement:this.node,content:"To Garage Page",classes:["header__button","ubuntu-regular"]});t.node.onclick=()=>{this.setViewMain(0)};const e=new i.Button({parentElement:this.node,content:"To Winners Page",classes:["header__button","ubuntu-regular"]});e.node.onclick=()=>{this.setViewMain(1)},this.node.append(t.node,e.node)}setViewMain(t){this.setViewCallback(t)}}e.HeaderView=o},817:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Input=void 0,e.Input=class{constructor({parentElement:t,tagName:e="input",type:n="text",classes:i=[],content:a=""}){const o=document.createElement(e);o.type=n,o.classList.add(...i),o.innerHTML=a,this.parentNode=t,this.node=o}}},990:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;const i=n(393),a=n(804);n(702);class o extends a.View{constructor(t,e){super({classes:["modal"]}),this.wrapper=new a.View({classes:["modal__wrapper"]}),this.message=new a.View({content:`${t.name} won the race! (${e.toFixed(2)}s)`,classes:["modal__text","ubuntu-bold"]}),this.buttonCloseModal=new i.Button({classes:["modal__button-close"],content:"OK!"}),this.wrapper.node.append(this.message.node,this.buttonCloseModal.button),this.node.append(this.wrapper.node)}render(){document.body.append(this.node),this.buttonCloseModal.button.onclick=()=>this.closeModal()}closeModal(){var t;null===(t=document.body.querySelector(".modal"))||void 0===t||t.remove()}}e.Modal=o},392:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSvg=e.constants=e.carModels=e.carBrands=e.backgroundsImages=void 0,e.backgroundsImages=["garage.jpg","winner.jpg"],e.carBrands=["Renault","BMW","Audi","Ford","Tesla","Nissan","Kia","Volkswagen","Peugeot","Toyota"],e.carModels=["Kadjar","7er","Q7","Explorer","CyberTruck","350Z","Sportage","Pride","Scirocco R","807","Mark 2"],e.constants={CARS_PER_PAGE_LIMIT:7,WINNERS_PER_PAGE_LIMIT:10,DEFAULT_ACTIVE_CAR_ID:0,DEFAULT_WINNER_CAR_ID:0,SORT_DESC_CLASS:"desc",SORT_ASC_CLASS:"asc"},e.createSvg=function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("href","./assets/carSprite.svg#Car"),n.setAttribute("y","10"),e.classList.add("icon"),e.append(n),e.style.fill=t,e}},804:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0,e.View=class{constructor({tagName:t="div",classes:e=[],content:n="",parentElement:i}){const a=document.createElement(t);a.classList.add(...e),a.textContent=n,i&&(this.parentNode=i),this.node=a}}},76:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const i=n(514),a=n(804),o=n(876),r=n(555),s=n(828),c=n(610),d=n(392);e.App=class{constructor(){this.header=new i.HeaderView(this.setViewMain.bind(this)),this.main=new a.View({tagName:"main",classes:["main"]}),this.garagePage=new o.GarageView(this.main.node),this.winnerPage=new s.WinnerView(this.main.node),r.pages.push(this.garagePage,this.winnerPage),this.setViewMain(0)}render(){document.body.append(this.header.node),document.body.append(this.main.node)}setViewMain(t){this.main.node&&(this.main.node.innerHTML=""),c.state.activePage=t,this.currentPage=r.pages[t].node,this.main.node.append(this.currentPage),this.changeBackground()}changeBackground(){document.body.style.backgroundImage=`url(./assets/${d.backgroundsImages[c.state.activePage]})`}}},876:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GarageView=void 0;const o=n(804),r=n(191),s=n(884),c=n(821);n(448);const d=a(n(175)),l=n(300),u=n(392),h=n(962),p=n(393),g=n(610);class m extends o.View{constructor(t){super({tagName:"section",classes:["garage"],parentElement:t}),this.carsCount=0,this.currentPage=1,this.maxPages=1,this.createControlCar=new s.CreateCarControlView(this.node),this.updateControlCar=new c.UpdateCarControlView(this.node),this.raceControl=new r.RaceControlView(this.node),this.titlePage=new o.View({parentElement:this.node,tagName:"h1",classes:["garage__title","title-page","ubuntu-bold"],content:`Garage Cars (${this.carsCount})`}),this.counterOnPage=new o.View({parentElement:this.node,tagName:"h3",classes:["garage__counter","ubuntu-bold"],content:`Page #(${this.currentPage} / ${this.maxPages})`}),this.containerPagination=new o.View({parentElement:this.node,classes:["pagination-wrapper"]}),(0,h.subscribeEvent)("cars/update",this.updateGarage.bind(this)),(0,h.subscribeEvent)("car/random",this.generateRandomCars.bind(this)),(0,h.subscribeEvent)("race/started",this.checkRaseResetState.bind(this)),this.render()}render(){return i(this,void 0,void 0,(function*(){this.node.append(this.createControlCar.node,this.updateControlCar.node,this.raceControl.node,this.titlePage.node,this.counterOnPage.node),yield this.updateGarage(),this.createControlPagination()}))}getCars(){return i(this,void 0,void 0,(function*(){const t=yield(0,l.getCars)(this.currentPage);this.carsCount=t.count,this.currentCars=t.data,this.maxPages=this.calcMaxPage()}))}updateGarage(){return i(this,void 0,void 0,(function*(){yield this.getCars(),this.updatePageTitle(),this.updatePageNumber(),this.containerPagination.node.remove(),this.renderRace(this.currentCars||[]),this.node.append(this.containerPagination.node),this.checkStatePaginationControls()}))}changePage(){this.updateGarage()}checkRaseResetState(){var t,e;const n=null===(t=this.nextButton)||void 0===t?void 0:t.button,i=null===(e=this.prevButton)||void 0===e?void 0:e.button;g.state.isRaceStarted?n&&i&&(n.disabled||(n.disabled=!0),i.disabled||(i.disabled=!0)):this.checkStatePaginationControls()}updatePageTitle(){this.titlePage.node.textContent=`Garage Cars (${this.carsCount})`}updatePageNumber(){this.counterOnPage.node.textContent=`Page #(${this.currentPage} / ${this.maxPages})`}renderRace(t){void 0!==this.race&&this.node.removeChild(this.race.node),this.race=new d.default(this.node,t),this.node.append(this.race.node)}calcMaxPage(){return Math.ceil(this.carsCount/u.constants.CARS_PER_PAGE_LIMIT)}generateRandomCars(){return i(this,void 0,void 0,(function*(){const t=[];for(let e=0;e<100;e+=1){const e={name:`${u.carBrands[Math.floor(10*Math.random())]} ${u.carModels[Math.floor(10*Math.random())]}`,color:this.generateRandomColor()};t.push((0,l.createCar)(JSON.stringify(e)))}yield Promise.all(t)}))}generateRandomColor(){return`#${Math.floor(16777215*Math.random()).toString(16)}`}createControlPagination(){this.prevButton=new p.Button({parentElement:this.node,classes:["ubuntu-regular"],content:"Previous"}),this.prevButton.node.onclick=()=>{this.currentPage-=1,this.changePage()},this.nextButton=new p.Button({parentElement:this.node,classes:["ubuntu-regular"],content:"Next"}),this.nextButton.node.onclick=()=>{this.currentPage+=1,this.changePage()},this.containerPagination.node.append(this.prevButton.button,this.nextButton.button),this.checkStatePaginationControls(),this.node.append(this.containerPagination.node)}checkStatePaginationControls(){this.checkPaginationPrevState(),this.checkPaginationNextState()}checkPaginationPrevState(){var t;const e=null===(t=this.prevButton)||void 0===t?void 0:t.button;e&&(this.currentPage>1?e.disabled=!1:e.disabled=!0)}checkPaginationNextState(){var t;const e=null===(t=this.nextButton)||void 0===t?void 0:t.button;e&&(this.currentPage<this.maxPages?e.disabled=!1:e.disabled=!0)}}e.GarageView=m},884:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CreateCarControlView=void 0;const a=n(300),o=n(393),r=n(962),s=n(817),c=n(804);class d extends c.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.nameInput=new s.Input({parentElement:this.node,classes:["control__input-name","ubuntu-medium"]}),this.nameInput.node.required=!0,this.colorPicker=new s.Input({parentElement:this.node,classes:["control__input-color"],type:"color"}),this.buttonSubmit=new o.Button({parentElement:this.node,content:"Create Car",classes:["control__button","ubuntu-medium"]}),this.buttonSubmit.button.type="submit",this.render()}render(){const t=new c.View({parentElement:this.node,tagName:"form",classes:["control__car-form"]});t.node.onsubmit=t=>t.preventDefault(),this.buttonSubmit.button.onclick=()=>i(this,void 0,void 0,(function*(){this.nameInput.node.checkValidity()&&(yield this.addCar(this.nameInput.node.value,this.colorPicker.node.value),(0,r.triggerEvent)("cars/update"),this.clearControls())})),t.node.append(this.nameInput.node,this.colorPicker.node,this.buttonSubmit.node),this.node.append(t.node)}addCar(t,e){return i(this,void 0,void 0,(function*(){const n={name:t,color:e};yield(0,a.createCar)(JSON.stringify(n))}))}clearControls(){this.nameInput.node.value="",this.colorPicker.node.value="#000000"}}e.CreateCarControlView=d},175:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n(962),o=n(392),r=n(804),s=n(610),c=i(n(411));class d extends r.View{constructor(t,e){super({parentElement:t,classes:["race"]}),this.tracks=[],this.cars=e,(0,a.subscribeEvent)("cars/raceStart",this.startRace.bind(this)),(0,a.subscribeEvent)("cars/raceReset",this.resetRace.bind(this)),this.renderTracks()}renderTracks(){const t=document.createDocumentFragment();this.cars.forEach((e=>{const n=new c.default(this.node,e);this.tracks.push(n),t.append(n.node)})),this.node.append(t)}startRace(){s.state.winnerCarId=o.constants.DEFAULT_WINNER_CAR_ID,this.updateTrackAccess(!0);const t=[],e=[];this.tracks.forEach((e=>{t.push(e.startEngine())})),Promise.all(t).then((t=>{t.forEach(((t,n)=>{e.push(this.tracks[n].raceAllCars(t)),this.tracks[n].isCarDriving=!0,this.tracks[n].checkCarStatus()}))})),this.updateRaceState(!0)}resetRace(){const t=[];this.tracks.forEach((e=>{t.push(e.resetCar())})),Promise.all(t).then((()=>{this.updateRaceState(!1),this.updateTrackAccess(!1)}))}updateRaceState(t){s.state.isRaceStarted=t,(0,a.triggerEvent)("race/started")}updateTrackAccess(t){this.tracks.forEach((e=>{e.updateTrackAccess(t)}))}}e.default=d},191:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RaceControlView=void 0;const a=n(393),o=n(962),r=n(804),s=n(610);class c extends r.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.randomCarsButton=new a.Button({parentElement:this.node,content:"Random Cars",classes:["control__button","ubuntu-medium"]}),this.startRaceButton=new a.Button({parentElement:this.node,content:"Start Race",classes:["control__button","ubuntu-medium"]}),this.resetButton=new a.Button({parentElement:this.node,content:"Reset",classes:["control__button","ubuntu-medium"]}),this.resetButton.button.disabled=!0,(0,o.subscribeEvent)("race/started",this.checkRaceResetState.bind(this)),this.render()}render(){this.randomCarsButton.node.onclick=()=>{this.generateRandomCars()},this.startRaceButton.node.onclick=()=>{this.startRace()},this.resetButton.node.onclick=()=>{this.resetRace()},this.node.append(this.randomCarsButton.node,this.startRaceButton.node,this.resetButton.node)}generateRandomCars(){return i(this,void 0,void 0,(function*(){this.randomCarsButton.button.disabled=!0,yield(0,o.triggerEvent)("car/random"),yield(0,o.triggerEvent)("cars/update"),this.randomCarsButton.button.disabled=!1}))}startRace(){this.startRaceButton.button.disabled=!0,this.resetButton.button.disabled=!0,this.randomCarsButton.button.disabled=!0,(0,o.triggerEvent)("cars/raceStart")}resetRace(){this.resetButton.button.disabled=!0,(0,o.triggerEvent)("cars/raceReset")}checkRaceResetState(){s.state.isRaceStarted?(this.resetButton.button.disabled=!1,this.startRaceButton.button.disabled=!0,this.randomCarsButton.button.disabled=!0):(this.startRaceButton.button.disabled=!1,this.randomCarsButton.button.disabled=!1,this.resetButton.button.disabled=!0)}}e.RaceControlView=c},411:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(300),o=n(393),r=n(962),s=n(990),c=n(392),d=n(804),l=n(610);class u extends d.View{constructor(t,e){super({parentElement:t,classes:["track"]}),this.selectBtn=new o.Button({parentElement:this.node,content:"Select",classes:["ubuntu-regular"]}),this.removeBtn=new o.Button({parentElement:this.node,content:"Remove",classes:["ubuntu-regular"]}),this.stopBtn=new o.Button({parentElement:this.node,content:"B",classes:["ubuntu-regular"]}),this.startBtn=new o.Button({parentElement:this.node,content:"A",classes:["ubuntu-regular"]}),this.isCarDriving=!1,this.trackAnimationFrameId=0,this.car=e,this.carContainer=new d.View({classes:["car-container"]}),this.createTrack()}createTrackHeader(){const t=new d.View({classes:["track-header"]});this.selectBtn.node.onclick=()=>this.selectTrack(),this.removeBtn.node.onclick=()=>i(this,void 0,void 0,(function*(){yield this.deleteTrack()}));const e=new d.View({tagName:"h4",classes:["car-title","ubuntu-bold"],content:this.car.name});return t.node.append(this.selectBtn.node,this.removeBtn.node,e.node),t}createTrack(){const t=this.createTrackHeader(),e=new d.View({classes:["track-road"]}),n=this.createCarControls(),i=(0,c.createSvg)(this.car.color);this.carContainer.node.append(i),this.carItem=this.carContainer.node.querySelector(".icon");const a=new d.View({classes:["track-finish"]});e.node.append(n.node,this.carContainer.node,a.node),this.node.append(t.node,e.node),this.checkCarStatus()}createCarControls(){const t=new d.View({classes:["track-wrapper-btn"]});return this.startBtn.node.onclick=()=>i(this,void 0,void 0,(function*(){this.startBtn.button.disabled=!0;const t=yield this.startEngine();this.raceSingleCar(t),this.isCarDriving=!0,this.checkCarStatus()})),this.stopBtn.node.onclick=()=>i(this,void 0,void 0,(function*(){this.stopBtn.button.disabled=!0,yield this.stopEngine(),this.isCarDriving=!1,this.checkCarStatus()})),t.node.append(this.startBtn.node,this.stopBtn.node),t}selectTrack(){l.state.activeCarId=this.car.id,(0,r.triggerEvent)("car/select")}deleteTrack(){return i(this,void 0,void 0,(function*(){this.removeBtn.button.disabled=!0,yield(0,a.deleteCar)(this.car.id),(yield(0,a.getAllWinners)()).map((t=>t.id)).includes(this.car.id)&&(yield(0,a.deleteWinner)(this.car.id)),(0,r.triggerEvent)("cars/update"),(0,r.triggerEvent)("winners/update"),(0,r.triggerEvent)("car/remove")}))}startEngine(){return i(this,void 0,void 0,(function*(){return yield this.getEngine()}))}raceSingleCar(t){return i(this,void 0,void 0,(function*(){this.startCarAnimation(t),this.updateTrackAccess(!0),(yield this.startDriving()).ok||cancelAnimationFrame(this.trackAnimationFrameId)}))}getEngine(){return i(this,void 0,void 0,(function*(){return yield(0,a.startEngine)(this.car.id)}))}startDriving(){return i(this,void 0,void 0,(function*(){return yield(0,a.driveCar)(this.car.id)}))}resetCar(){return i(this,void 0,void 0,(function*(){yield this.stopEngine()}))}stopEngine(){return i(this,void 0,void 0,(function*(){yield(0,a.stopEngine)(this.car.id),this.carItem&&(cancelAnimationFrame(this.trackAnimationFrameId),this.carItem.style.left="0px",this.isCarDriving=!1,this.updateTrackAccess(!1))}))}startCarAnimation(t){const e=this.carItem,n=Math.trunc(t.distance/t.velocity),i=(this.carContainer.node.clientWidth-e.clientWidth)/(n/1e3),a=(new Date).getTime();return this.trackAnimationFrameId=requestAnimationFrame((()=>{this.animateCarMovement(e,i,a,n)})),n}updateWinner(t,e){return i(this,void 0,void 0,(function*(){const n=+t.toFixed(2),i={wins:e.wins+1,time:n<e.time?n:e.time};yield(0,a.updateWinner)(e.id,JSON.stringify(i)),(0,r.triggerEvent)("winners/update")}))}addWinner(t){return i(this,void 0,void 0,(function*(){const e={id:this.car.id,wins:1,time:+t.toFixed(2)};yield(0,a.createWinner)(JSON.stringify(e)),(0,r.triggerEvent)("winners/update")}))}raceAllCars(t){return i(this,void 0,void 0,(function*(){const e=this.startCarAnimation(t),n=yield this.startDriving();if(n.ok){if(l.state.winnerCarId===c.constants.DEFAULT_WINNER_CAR_ID){const t=this.car.id;l.state.winnerCarId=t;const n=yield(0,a.getWinner)(t);0===Object.keys(n).length?yield this.addWinner(e/1e3):yield this.updateWinner(e/1e3,n),new s.Modal(this.car,e/1e3).render()}}else cancelAnimationFrame(this.trackAnimationFrameId);return n}))}animateCarMovement(t,e,n,i){const a=t,o=(new Date).getTime()-n,r=e*o/1e3;a.style.left=`${r}px`,o<i&&(this.trackAnimationFrameId=requestAnimationFrame((()=>{this.animateCarMovement(a,e,n,i)})))}checkCarStatus(){this.isCarDriving?(this.stopBtn.button.disabled=!1,this.startBtn.button.disabled=!0):(this.stopBtn.button.disabled=!0,this.startBtn.button.disabled=!1)}updateTrackAccess(t){t?(this.selectBtn.button.disabled=!0,this.removeBtn.button.disabled=!0,this.startBtn.button.disabled=!0,this.stopBtn.button.disabled=!0):(this.checkCarStatus(),this.selectBtn.button.disabled=!1,this.removeBtn.button.disabled=!1)}}e.default=u},821:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateCarControlView=void 0;const a=n(300),o=n(393),r=n(962),s=n(817),c=n(392),d=n(804),l=n(610);class u extends d.View{constructor(t){super({parentElement:t,classes:["garage__control-wrapper","control"]}),this.nameInput=new s.Input({parentElement:this.node,classes:["control__input-name","ubuntu-medium"]}),this.nameInput.node.required=!0,this.colorPicker=new s.Input({parentElement:this.node,classes:["control__input-color"],type:"color"}),this.buttonSubmit=new o.Button({parentElement:this.node,content:"Update Car",classes:["control__button","ubuntu-medium"]}),this.buttonSubmit.button.type="submit",(0,r.subscribeEvent)("car/select",this.fillCarData.bind(this)),(0,r.subscribeEvent)("car/remove",this.resetControlsState.bind(this)),this.render()}render(){const t=new d.View({parentElement:this.node,tagName:"form",classes:["control__car-form"]});t.node.onsubmit=t=>t.preventDefault(),this.checkButton(),this.buttonSubmit.button.onclick=()=>i(this,void 0,void 0,(function*(){this.nameInput.node.checkValidity()&&(yield this.updateCar())})),t.node.append(this.nameInput.node,this.colorPicker.node,this.buttonSubmit.node),this.node.append(t.node)}updateCar(){return i(this,void 0,void 0,(function*(){const t={name:this.nameInput.node.value,color:this.colorPicker.node.value};yield(0,a.updateCar)(l.state.activeCarId,JSON.stringify(t)),yield(0,r.triggerEvent)("cars/update"),this.resetControlsState()}))}clearControls(){this.nameInput.node.value="",this.colorPicker.node.value="#000000"}fillCarData(){return i(this,void 0,void 0,(function*(){const t=yield(0,a.getCar)(l.state.activeCarId);this.nameInput.node.value=t.name,this.colorPicker.node.value=t.color,this.checkButton()}))}clearActiveCar(){l.state.activeCarId=c.constants.DEFAULT_ACTIVE_CAR_ID}checkButton(){0!==l.state.activeCarId?this.buttonSubmit.button.disabled=!1:this.buttonSubmit.button.disabled=!0}resetControlsState(){this.clearActiveCar(),this.clearControls(),this.checkButton()}}e.UpdateCarControlView=u},555:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pages=void 0,e.pages=[]},610:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.state=void 0;const i=n(392);e.state={activePage:0,activeCarId:i.constants.DEFAULT_ACTIVE_CAR_ID,winnerCarId:i.constants.DEFAULT_WINNER_CAR_ID,isRaceStarted:!1}},828:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.WinnerView=void 0;const a=n(300),o=n(393),r=n(962),s=n(392),c=n(804);n(936);class d extends c.View{constructor(t){super({tagName:"section",classes:["winner"],parentElement:t}),this.winners=[],this.currentPage=1,this.maxPages=1,this.winnersCount=0,this.sortingParams={sort:a.config.winnersIdSortQuery,order:a.config.winnersAscSortOrder},this.table=new c.View({parentElement:this.node,tagName:"table",classes:["winner__table","table","ubuntu-medium"]}),this.tbody=new c.View({parentElement:this.node,tagName:"tbody",classes:["table__body"]}),this.tHead=new c.View({tagName:"tr",classes:["table__header"]}),this.titlePage=new c.View({parentElement:this.node,tagName:"h1",classes:["winner__title","title-page","ubuntu-bold"],content:`Winners (${this.winnersCount})`}),this.counterOnPage=new c.View({parentElement:this.node,tagName:"h3",classes:["winner__counter","ubuntu-bold"],content:`Page #(${this.currentPage} / ${this.maxPages})`}),this.containerPagination=new c.View({parentElement:this.node,classes:["pagination-wrapper"]}),(0,r.subscribeEvent)("winners/update",this.updateTable.bind(this)),this.render()}render(){return i(this,void 0,void 0,(function*(){this.node.append(this.titlePage.node,this.counterOnPage.node),yield this.getWinners(),this.updatePageTitle(),this.updatePageNumber(),this.buildTable(),this.createControlPagination()}))}buildTable(){this.makeTableHeader(),this.fillTable(),this.node.append(this.table.node)}updateTable(){return i(this,void 0,void 0,(function*(){yield this.getWinners(),this.updatePageTitle(),this.updatePageNumber(),this.fillTable(),this.checkStatePaginationControls()}))}makeTableRow(t,e,n){const i=new c.View({tagName:"tr",classes:["ubuntu-medium"]}),a=new c.View({tagName:"td"});a.node.textContent=`${n}.`;const o=new c.View({tagName:"td"}),r=(0,s.createSvg)(t.color);o.node.append(r);const d=new c.View({tagName:"td"});d.node.textContent=t.name;const l=new c.View({tagName:"td"});l.node.textContent=String(e.wins);const u=new c.View({tagName:"td"});u.node.textContent=`${e.time}`,i.node.append(a.node,o.node,d.node,l.node,u.node),this.tbody.node.append(i.node)}makeTableHeader(){const t=new c.View({tagName:"th"});t.node.textContent="Number";const e=new c.View({tagName:"th"});e.node.textContent="Car";const n=new c.View({tagName:"th"});n.node.textContent="Name";const o=new c.View({tagName:"th",classes:["sortable"]});o.node.textContent="Wins",o.node.onclick=()=>i(this,void 0,void 0,(function*(){yield this.sortByColumn(a.config.winnersWinsSortQuery,o.node)}));const r=new c.View({tagName:"th",classes:["sortable"]});r.node.textContent="Best time (s)",r.node.onclick=()=>i(this,void 0,void 0,(function*(){yield this.sortByColumn(a.config.winnersTimeSortQuery,r.node)})),this.tHead.node.append(t.node,e.node,n.node,o.node,r.node),this.table.node.append(this.tHead.node)}getWinners(){return i(this,arguments,void 0,(function*(t=this.sortingParams.sort,e=this.sortingParams.order){const{data:n,count:i}=yield(0,a.getWinners)(this.currentPage,t,e);this.winners=n,this.winnersCount=i,this.maxPages=this.calcMaxPage()}))}fillTable(){return i(this,void 0,void 0,(function*(){this.tbody.node.innerHTML="";const t=[];this.winners.forEach((e=>{t.push((0,a.getCar)(e.id))})),yield Promise.all(t).then((t=>{t.forEach(((t,e)=>{this.makeTableRow(t,this.winners[e],10*(this.currentPage-1)+e+1)}))})),this.table.node.append(this.tbody.node)}))}sortByColumn(t,e){return i(this,void 0,void 0,(function*(){this.table.node.classList.contains(s.constants.SORT_ASC_CLASS)?(this.table.node.classList.remove(s.constants.SORT_ASC_CLASS),this.table.node.classList.add(s.constants.SORT_DESC_CLASS),this.sortDesc(t)):(this.table.node.classList.remove(s.constants.SORT_DESC_CLASS),this.table.node.classList.add(s.constants.SORT_ASC_CLASS),this.sortAsc(t));for(let t=0;t<this.tHead.node.children.length;t+=1)this.tHead.node.children[t].classList.remove("active");e.classList.add("active"),yield this.updateTable()}))}sortDesc(t){this.sortingParams.sort=t,this.sortingParams.order=a.config.winnersDescSortOrder}sortAsc(t){this.sortingParams.sort=t,this.sortingParams.order=a.config.winnersAscSortOrder}calcMaxPage(){return Math.ceil(this.winnersCount/s.constants.WINNERS_PER_PAGE_LIMIT)}updatePageTitle(){this.titlePage.node.textContent=`Winners (${this.winnersCount})`}updatePageNumber(){this.counterOnPage.node.textContent=`Page #(${this.currentPage} / ${this.maxPages})`}createControlPagination(){this.prevButton=new o.Button({parentElement:this.node,classes:["ubuntu-regular"],content:"Previous"}),this.prevButton.node.onclick=()=>{this.currentPage-=1,this.changePage()},this.nextButton=new o.Button({parentElement:this.node,classes:["ubuntu-regular"],content:"Next"}),this.nextButton.node.onclick=()=>{this.currentPage+=1,this.changePage()},this.containerPagination.node.append(this.prevButton.button,this.nextButton.button),this.checkStatePaginationControls(),this.node.append(this.containerPagination.node)}checkStatePaginationControls(){this.checkPaginationPrevState(),this.checkPaginationNextState()}checkPaginationPrevState(){var t;const e=null===(t=this.prevButton)||void 0===t?void 0:t.button;e&&(this.currentPage>1?e.disabled=!1:e.disabled=!0)}checkPaginationNextState(){var t;const e=null===(t=this.nextButton)||void 0===t?void 0:t.button;e&&(this.currentPage<this.maxPages?e.disabled=!1:e.disabled=!0)}changePage(){this.updateTable(),this.checkStatePaginationControls()}}e.WinnerView=d},183:(t,e,n)=>{t.exports=n.p+"assets/finish-47c94eb261ff8d25809c.svg"}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={id:i,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=i[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{const t=n(76);n(511),(new t.App).render()})()})();